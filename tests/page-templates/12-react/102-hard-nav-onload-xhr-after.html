<%= header %>
<%= boomerangScript %>
<!-- Fire onload with a XHR after onload, which delays the load time until the XHR is complete -->
<script src="102-hard-nav-onload-xhr-after.js" type="text/javascript"></script>
<script type="text/javascript">
(function(w, d) {
  var xhr, json, img;

  function onloadCb() {
    setTimeout(function() {
      xhr = new w.XMLHttpRequest();
      xhr.addEventListener("load", function() {
        img = d.createElement("img");
        img.src = "/delay?delay=2000&file=pages/12-react/support/img.jpg&id=xhr&rnd=" + Math.random();
        img.style = "max-height: 100px;";
        d.body.appendChild(img);
      });
      xhr.open("GET", "/delay?delay=500&file=pages/12-react/support/widgets.json", true);
      xhr.send(null);
    }, 0);
  }

  if (w.addEventListener) {
    w.addEventListener("load", onloadCb);
  }
  else if (w.attachEvent) {
    w.attachEvent("onpropertychange", function(e) {
      e = e || w.event;

      if (e && e.propertyName === "onload") {
        onloadCb();
      }
    });
  }
}(this, this.document));
</script>
<img src="/delay?delay=500&file=pages/12-react/support/img.jpg&id=home" style="max-height: 100px;"/>
<script>
BOOMR_test.init({
  autorun: false,
  instrument_xhr: true,
  History: {
    enabled: true,
    auto: true
  },
  testAfterOnBeacon: true
});
</script>
<%= footer %>
